{% extends "base.html" %}
{% load static %}

{% block 'title' %}Minhas Campanhas::{{ user.username }}{% endblock %}

{% block 'conteudo' %}
<h1>MINHAS CAMPANHAS</h1>
<div>
  <form method="post"> {% csrf_token %}
    <input  id="pesquisa" type="text" placeholder="PESQUISAR" class="pergunta" name="pesquisar_personagem" value="{{pesquisa}}">
    <input class="botao" type="submit" value="PESQUISAR">
  </form>
  </div>
<div class="container text-center lista_personagens">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    {% for c in campanhas %}      
    <div class="col">
      <div class="card" style="width: 18rem;">
            <img src="{{c.imagem_de_capa.url}}" class="card-img-top" alt="...">
            <div class="card-body ">
                <h5 class="card-title">{{c.nome_campanha}}</h5>
                
                <p class="card-text">
                  <button type="button" class="btn btn-lg" data-bs-toggle="popover" data-bs-title="História de {{c.nome_campanha}}" data-bs-content="{{c.descricao}}">Descrição</button>
                </p>
                <a href="{% url 'detalhes_campanha' c.id %}" class="btn btn-primary"><i class="bi bi-play"></i></a>
                <a href="{% url 'editar_campanha' c.id %}" class="btn btn-warning"><i class="bi bi-pencil"></i></a>
                <a href="{% url 'excluir_campanha' c.id %}" class="btn btn-danger"><i class="bi bi-trash"></i></a>
            </div>
        </div>
    </div>
    {% endfor%}
  </div>
  <a href="{% url 'cadastrar_campanha' %}" class="botao">Cadastrar nova campanha</a>
</div>
<script>
  const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
  const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>
{% endblock %}