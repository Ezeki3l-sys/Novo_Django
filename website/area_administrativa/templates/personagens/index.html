{% extends "base.html" %}

{% load static %}

{% block 'title' %}Meus Personagens::{{ user.username }}{% endblock %}
{% block 'conteudo' %}
<h1>MEUS PERSONAGENS</h1>
<div>
  <form method="post"> {% csrf_token %}
    <input  id="pesquisa" type="text" placeholder="PESQUISAR" class="pergunta" name="pesquisar_personagem" value="{{pesquisa}}">
    <input class="botao" type="submit" value="PESQUISAR">
  </form>
  </div>
<div class="container text-center lista_personagens">
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    {% for p in personagens %}  
    <div class="col">
      <div class="card" style="width: 18rem;">
            <img src="{{p.avatar_personagem.url}}" class="card-img-top" alt="...">
            <div class="card-body ">
                <h5 class="card-title">{{p.nome_personagem}}</h5>
                <p class="card-text">
                  <button type="button" class="btn btn-lg" data-bs-toggle="popover" data-bs-title="História de {{p.nome_personagem}}" data-bs-content="{{p.historia}}">História</button>
                </p>
                <a href="{% url 'detalhes_personagem' p.id %}" class="btn btn-primary"><i class="bi bi-play"></i></a>
                <a href="{% url 'editar_personagem' p.id %}" class="btn btn-warning"><i class="bi bi-pencil"></i></a>
                <a href="{% url 'deletar_personagem' p.id %}" class="btn btn-danger"><i class="bi bi-trash"></i></a>
            </div>
        </div>
    </div>
    {% endfor%}
  </div>
  <a href="{% url 'cadastrar_personagem' %}" class="botao">Cadastrar novo personagem</a>
</div>


<script>
  const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
  const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))
</script>


{% endblock %}
