{% extends "base.html" %}
{% load static %}
{% block 'conteudo' %}
<div class="container">
<h1 class="titulos_entrada">EXPLORE E BUSQUE POR CAMPANHAS</h1>
<div>
  <form method="post">  {% csrf_token %}
    <input  id="pesquisa " type="text" placeholder="PESQUISAR" class="pergunta" name="pesquisar_campanha" value="{{pesquisa}}">
    <input class="botao" style="margin-top: 15px;" type="submit" value="PESQUISAR">
    <div class="col-auto w-100" style="margin-bottom: 40px;">
      <label>Pesquise por nome da campanha, nome do usuário ou username</label>
    </div>
      <!-- LEMBRAR DE MEXER NO MAX-WIDTH DA CLASSE "perguntas" -->
  </form>
</div>

<div class="container text-center lista_personagens">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
      {% for c in campanhas %}      
      <div class="col card_campanhas_personagens">
        <div class="card mb-2 mt-1"  style="width: 18rem;">
              <img src="{{c.imagem_de_capa.url}}" class="card-img-top" alt="...">
              <div class="card-body ">
                  <h5 class="card-title">{{c.nome_campanha}}</h5>
          
                  <button type="button" class="btn btn-lg botao" data-bs-toggle="popover" data-bs-title="Popover title" data-bs-content="{{c.descricao}}">Descrição</button>
      
                  <p class="card-text"><strong>{{c.mestre}}</strong></p>
                  {% if user.is_authenticated %}
                  {% if c.id in minhas_campanhas %}
                      <a href="{% url 'jogar_campanha' c.id %}" class="btn botao">Jogar</a> 
                  {% else %}
                      <a href="{% url 'participar_campanha' c.id %}" class="btn botao">Participar da campanha</a>
                  {% endif %}
                {% else %}
                    <div>
                      <small> Faça login ou cadastre-se para participar da campanha</small>
                      <div class="w-100 mb-3"></div>
                      <a href="{% url 'accounts:cadastro' %}" class="botao ">Cadastre-se</a>
                    </div>
                    
                {% endif %}                  
              </div>  
          </div>
      </div>
      {% endfor%}
    </div>
  </div>
</div>
</div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]');
      const popoverList = [...popoverTriggerList].map(el => new bootstrap.Popover(el));
    });
  </script>
    
{% endblock %}